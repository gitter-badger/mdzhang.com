(function(){var a,b,c,d,e,f,g,h,i;e="local",b="http://crossorigin.me/",a=function(){var a;a=this,a.init=function(){return a.books=[],a.shows=[],a.games=[],a.loading=!0,a.current="game",Promise.join(a.getBooks(),a.getAnime(),a.getGames(),function(b,c,d){a.books=b,a.shows=c,a.games=d,a.render(),a.loading=!1})},a.render=function(){var b,c,d;b=a[a.current+"s"],d=$.templates("#"+a.current+"Template"),c=d.render(b),$(".activity").html(c)},a.getCorsProxyUrl=function(a,c){return a+=_.chain(c).map(function(a,b){return b+"="+a}).join("&").value(),a=b+a},a.request=function(b,c,d){var e;return c=a.getCorsProxyUrl(c,d),e={type:b,url:c},Promise.resolve($.ajax(e))},a.getGames=function(){var b,c;return c="http://api.steampowered.com/IPlayerService/GetRecentlyPlayedGames/v0001/?",b={key:"FBADE7566BA2B38B1BC3BAD857FFFDB5",steamid:"76561198046100572",format:"json"},a.request("GET",c,b).then(function(b){var c;return c=b&&b.response&&b.response.games,c&&(c=a.formatSteamResponse(c),console.info("Fetched Steam games: ",c)),c})["catch"](function(a){console.error("Failed to fetch games from Steam",a)})},a.formatSteamResponse=function(a){var b,c;return b="http://cdn.akamai.steamstatic.com/steam/apps/",c="http://store.steampowered.com/app/",_.each(a,function(a){var d;d=b+a.appid+"/header.jpg",a.image_url=d,a.link=c+a.appid}),a},a.getBooks=function(){var b,c;return c="https://www.goodreads.com/review/list/13686342?",b={format:"xml",v:"2",shelf:"to-read",key:"P78YnKD8IcTJLSJM6OwWw"},a.request("GET",c,b).then(function(b){var c,d;return d=$.xml2json(b),c=a.formatGoodreadsResponse(d),c&&(c=a.formatSteamResponse(c),console.info("Fetched Goodreads books: ",c)),c})["catch"](function(a){console.error("Failed to fetch books from Goodreads",a)})},a.formatGoodreadsResponse=function(a){var b;return b=[],_.isArray(a.reviews.review)?b=a.reviews.review:_.isObject(a.reviews.review)&&(b=[a.reviews.review]),_.each(b,function(a){a.book.started_at=a.started_at,_.isArray(a.book.authors.author)?a.book.author=a.book.authors.author[0]:_.isObject(a.book.authors.author)&&(a.book.author=a.book.authors.author)}),b=_.pluck(b,"book")},a.getAnime=function(){var b;return b="https://api.atarashiiapp.com/animelist/eeemaroo",a.request("GET",b,{}).then(function(b){var c;if(c=b&&b.anime,!c)throw new Error("Given bad data: "+b);return c=a.formatMALApiResponse(c),console.info("Fetched MyAnimeList anime: ",c),c})["catch"](function(a){console.error("Failed to fetch anime from MyAnimeList",a)})},a.formatMALApiResponse=function(a){var b,c;return b="http://myanimelist.net/anime/",c=_.groupBy(a,"watched_status").watching,_.each(c,function(a){a.link=b+a.id}),c},a.init()},a(),d={Home:".blurb",Activity:".activity",Projects:".projects",Contact:".contact"},f=function(a){$("div.main").css("display",""),_.chain(d).values().each(function(a){return $("div.main").find(a).css("display","none")}).value(),a.css("display","flex")},c=function(a){var b,c,e;switch(b=$(a.target),e=b.attr("name")){case"Home":case"Activity":case"Projects":c=$("div.main").find(d[e]),f(c);break;case"Contact":c=$("div.main").css("display","none")}},$(function(){$(".tooltip-target").hover(h),$(".tooltip-target").mouseleave(i),$(".tooltip-target").click(g),$("div.dot").click(c)}),h=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.is(b)||(d.css("z-index",1e3),d.find(".tooltip").css({visibility:"visible",opacity:1}),b&&b.find(".tooltip").css("opacity",.5))},i=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.css("z-index",999),d.is(b)||(d.find(".tooltip").css({visibility:"hidden",opacity:0}),e.find(".current").find(".tooltip").css("opacity",1))},g=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.is(b)||(b&&(b.removeClass("current"),b.find(".tooltip").css({visibility:"hidden",opacity:0})),d.addClass("current"))}}).call(this);