(function(){var a,b,c,d,e,f,g,h,i,j,k;g="local",d="http://crossorigin.me/",a=function(){var a;return a={},a.init=function(){return a.books=[],a.shows=[],a.games=[],a.loading=!0,a.activities=["game","book","show"],a.current="book",Promise.join(a.getBooks(),a.getAnime(),a.getGames(),function(b,c,d){a.books=b,a.shows=c,a.games=d,a.render(),a.loading=!1})},a.switchActivity=function(b){return _.contains(a.activities,b)?(a.current=b,a.render(),!0):void console.error("Invalid activity provided: ",b)},a.render=function(){var b,c,d;b=a[a.current+"s"],d=$.templates("#"+a.current+"Template"),c=d.render(b),$(".content").html(c)},a.getCorsProxyUrl=function(a,b){return a+=_.chain(b).map(function(a,b){return b+"="+a}).join("&").value(),a=d+a},a.request=function(b,c,d){var e;return c=a.getCorsProxyUrl(c,d),e={type:b,url:c},Promise.resolve($.ajax(e))},a.getGames=function(){var b,c;return c="http://api.steampowered.com/IPlayerService/GetRecentlyPlayedGames/v0001/?",b={key:"FBADE7566BA2B38B1BC3BAD857FFFDB5",steamid:"76561198046100572",format:"json"},a.request("GET",c,b).then(function(b){var c;return c=b&&b.response&&b.response.games,c&&(c=a.formatSteamResponse(c),console.info("Fetched Steam games: ",c)),c})["catch"](function(a){console.error("Failed to fetch games from Steam",a)})},a.formatSteamResponse=function(a){var b,c;return b="http://cdn.akamai.steamstatic.com/steam/apps/",c="http://store.steampowered.com/app/",_.each(a,function(a){var d;d=b+a.appid+"/header.jpg",a.image_url=d,a.link=c+a.appid}),a},a.getBooks=function(){var b,c;return c="https://www.goodreads.com/review/list/13686342?",b={format:"xml",v:"2",shelf:"currently-reading",key:"P78YnKD8IcTJLSJM6OwWw"},a.request("GET",c,b).then(function(b){var c,d;return d=$.xml2json(b),c=a.formatGoodreadsResponse(d),c&&console.info("Fetched Goodreads books: ",c),c})["catch"](function(a){console.error("Failed to fetch books from Goodreads",a)})},a.formatGoodreadsResponse=function(a){var b;return b=[],_.isArray(a.reviews.review)?b=a.reviews.review:_.isObject(a.reviews.review)&&(b=[a.reviews.review]),b=_.pluck(b,"book"),_.each(b,function(a){_.isArray(a.authors.author)?a.author=a.authors.author[0]:_.isObject(a.authors.author)&&(a.author=a.authors.author),a.image_url.indexOf("nophoto")>-1||(a.image_url=a.image_url.replace(/(books\/\d+)([a-z]{1})(\/\d+.*)/,"$1l$3"))}),b},a.getAnime=function(){var b;return b="https://api.atarashiiapp.com/1/animelist/eeemaroo",a.request("GET",b,{}).then(function(b){var c;return c=b&&b.anime,c&&(c=a.formatMALApiResponse(c),console.info("Fetched MyAnimeList anime: ",c)),c})["catch"](function(a){console.error("Failed to fetch anime from MyAnimeList",a)})},a.formatMALApiResponse=function(a){var b,c;return b="http://myanimelist.net/anime/",c=_.groupBy(a,"watched_status").watching,_.each(c,function(a){a.link=b+a.id}),c},a.init(),a},f={Home:".blurb",Activity:".activity",Projects:".projects",Contact:".contact"},b=a(),h=function(a){$("div.main").css("display",""),_.chain(f).values().each(function(a){return $("div.main").find(a).css("display","none")}).value(),a.css("display","flex")},e=function(a){var b,c,d;switch(b=$(a.target),d=b.attr("name")){case"Home":case"Activity":case"Projects":c=$("div.main").find(f[d]),h(c);break;case"Contact":c=$("div.main").css("display","none")}},c=function(a){var c,d,e,f;c=$(a.currentTarget),d=c.attr("name"),f=b.switchActivity(d),e=$("div.container.activity > ul.nav").find(".selected"),f&&(c.addClass("selected"),e.removeClass("selected"))},$(function(){$(".tooltip-target").hover(j),$(".tooltip-target").mouseleave(k),$(".tooltip-target").click(i),$("div.dot").click(e),$("a.circle.activityNav").click(c)}),j=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.is(b)||(d.css("z-index",1e3),d.find(".tooltip").css({visibility:"visible",opacity:1}),b&&b.find(".tooltip").css("opacity",.5))},k=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.css("z-index",999),d.is(b)||(d.find(".tooltip").css({visibility:"hidden",opacity:0}),e.find(".current").find(".tooltip").css("opacity",1))},i=function(a){var b,c,d,e;c=$(a.target),d=c.parent(),e=d.parent(),b=e.find(".current"),d.is(b)||(b&&(b.removeClass("current"),b.find(".tooltip").css({visibility:"hidden",opacity:0})),d.addClass("current"))}}).call(this);